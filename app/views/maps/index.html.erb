  <div id="target"></div>
  <input type="text" id="address">
  <button id="search">検索する</button>

  <script
    src="https://maps.googleapis.com/maps/api/js?language=ja&region=JP&key=AIzaSyCUzGkhZi61kjs2Cyn59SMqtqZvgJbARKA&callback=initMap" async defer></script>
  <script>
    var map = false;

  function initMap(){
    'use strict';
    console.log('initMap');
    var target = document.getElementById('target');
    // var map;
    var center = {lat: 35.658034, lng: 139.701636};
    var marker = [];
    var infoWindow;
    var geocoder = new google.maps.Geocoder();

    map = new google.maps.Map(target, {
      center: center,
      zoom: 15
    });
    marker = new google.maps.Marker({
      position: center,
      map: map
    });


    document.getElementById('search').addEventListener('click', function(){
      geocoder.geocode({
        address: document.getElementById('address').value
      },
      function(results, status) {
        if (status != 'OK') {
          alert('Failed: ' + status);
          return;
        }
        if (results[0]) {
          new google.maps.Map(target, {
            center: results[0].geometry.location,
            zoom: 15
          });

          var east, north, pos, south, west;
          pos = map.getBounds();
          north = pos.getNorthEast().lat();
          south = pos.getSouthWest().lat();
          east = pos.getNorthEast().lng();
          west = pos.getSouthWest().lng();
          return $.getScript("/restaurants/marker?&north=" + north + "&south=" + south + "&east=" + east + "&west=" + west);



        } else {
          alert('No results found');
          return;
        }
      });
    });
  }
  </script>

<style>
  #target {
    width: 550px;
    height: 400px;
  }
</style>